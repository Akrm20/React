<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
    
    </head>
    
    <title>نظام محاسبي مصغر</title>
    <style>
        /* إعدادات عامة للشاشات الصغيرة */
        body {
            font-family: Tahoma, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            font-size: 11px; /* خط صغير جداً */
        }

        /* تنسيق شريط التبويبات */
        .tab-bar {
            display: flex;
            justify-content: space-around;
            background-color: #2c3e50;
            position: fixed;
            bottom: 0; /* التبويبات في الأسفل لسهولة الوصول باليد */
            width: 100%;
            height: 40px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }

        .tab-btn {
            background: none;
            border: none;
            color: #bdc3c7;
            padding: 5px;
            font-size: 10px; /* خط الأزرار صغير */
            flex-grow: 1;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .tab-btn.active {
            color: #fff;
            background-color: #1a252f;
            font-weight: bold;
        }

        /* منطقة المحتوى */
        .content-area {
            padding: 10px;
            margin-bottom: 50px; /* مسافة عشان التبويبات اللي تحت */
            height: calc(100vh - 60px);
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* تنسيق الشجرة الهرمية */
        .tree-node {
            margin-right: 15px; /* إزاحة للأبناء */
            border-right: 1px solid #ccc;
            padding-right: 5px;
        }
        
        .account-item {
            padding: 4px;
            border-bottom: 1px dashed #eee;
            display: flex;
            justify-content: space-between;
        }
        
        .account-code {
            color: #7f8c8d;
            font-size: 9px;
            margin-left: 5px;
        }
    </style>
</head>
<body>

    <div id="app-container" class="content-area">
        
        <div id="tab1" class="tab-content active">
            <h3>الرئيسية</h3>
            <p>ملخص النظام...</p>
        </div>

        <div id="tab2" class="tab-content">
            <h3>دليل الحسابات</h3>
            <div id="chart-container"></div>
        </div>

        <div id="tab3" class="tab-content">
            <h3>القيود اليومية</h3>
            <p>شاشة إدخال القيود...</p>
        </div>

        <div id="tab4" class="tab-content">
            <h3>التقارير</h3>
            <p>ميزانية، أرباح وخسائر...</p>
        </div>

        <div id="tab5" class="tab-content">
            <h3>الإعدادات</h3>
            <p>إعدادات النظام...</p>
        </div>

    </div>

    <div class="tab-bar">
        <button class="tab-btn active" onclick="showTab('tab1', this)">الرئيسية</button>
        <button class="tab-btn" onclick="showTab('tab2', this)">الدليل</button>
        <button class="tab-btn" onclick="showTab('tab3', this)">القيود</button>
        <button class="tab-btn" onclick="showTab('tab4', this)">التقارير</button>
        <button class="tab-btn" onclick="showTab('tab5', this)">إعدادات</button>
    </div>
<script src="Setting.js"></script>
<script src="Db.js"></script>
<script src="Tree.js"></script>
<script src="Ju.js"></script>
<script src="Fin.js"></script>
<script src="Re.js"></script>
<script>
    function showTab(tabId, btn) {
        document.querySelectorAll('.tab-content').forEach(div => div.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');

        // التوجيه المنطقي لكل تبويب
        if (tabId === 'tab1') initHomeDashboard(); // تشغيل لوحة التحكم
        if (tabId === 'tab4') initFinancialReports();
        if (tabId === 'tab5') renderSettingsTab();
    }
    
    // تشغيل التبويب الأول تلقائياً عند فتح التطبيق
    document.addEventListener('DOMContentLoaded', () => {
         // ننتظر قليلاً للتأكد من اتصال القاعدة (Db.js يرسل startSystem)
         // لكن كإجراء احتياطي أو عند التحديث:
         const btn1 = document.querySelector('.tab-btn');
         if(btn1) showTab('tab1', btn1);
    });
</script>

</body>
</html>